{"ast":null,"code":"import _objectSpread from \"/Users/olgakanishcheva/Developer/book-editor/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/olgakanishcheva/Developer/book-editor/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/olgakanishcheva/Developer/book-editor/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/olgakanishcheva/Developer/book-editor/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/olgakanishcheva/Developer/book-editor/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/olgakanishcheva/Developer/book-editor/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/olgakanishcheva/Developer/book-editor/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/olgakanishcheva/Developer/book-editor/client/src/components/AddBookForm.js\";\nimport './../stylesheets/AddBookForm.css';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { addBook } from './../actions/actions';\nimport validTextInput from './../helpers/validTextInput';\n\nvar AddBookForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddBookForm, _Component);\n\n  function AddBookForm(props, _ref) {\n    var _this;\n\n    var _store = _ref.store;\n\n    _classCallCheck(this, AddBookForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddBookForm).call(this, props));\n\n    _this.submit = function (e) {\n      var _assertThisInitialize = _assertThisInitialized(_assertThisInitialized(_this)),\n          state = _assertThisInitialize.state,\n          store = _assertThisInitialize.store,\n          refs = _assertThisInitialize.refs,\n          clearState = _assertThisInitialize.clearState;\n\n      e.preventDefault();\n      var textInputs = [{\n        name: refs._title,\n        maxLength: 30\n      }];\n      if (!textInputs.every(function (input) {\n        return validTextInput({\n          input: input.name,\n          maxLength: input.maxLength\n        });\n      })) return;\n      store.dispatch(addBook({\n        title: state.title,\n        publicationDate: +state.publicationDate\n      }));\n\n      refs._title.focus();\n    };\n\n    _this.changeTitle = function (title) {\n      _this.setState(function (prevState) {\n        return _objectSpread({}, prevState, {\n          title: title\n        });\n      });\n    };\n\n    _this.changePublicationDate = function (date) {\n      _this.setState(function (prevState) {\n        return _objectSpread({}, prevState, {\n          publicationDate: date\n        });\n      });\n    };\n\n    _this.renderTitleInput = function () {\n      var _assertThisInitialize2 = _assertThisInitialized(_assertThisInitialized(_this)),\n          changeTitle = _assertThisInitialize2.changeTitle,\n          state = _assertThisInitialize2.state;\n\n      var title = state.title;\n      return React.createElement(\"div\", {\n        className: \"add-book__input__container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        ref: \"_title\",\n        type: \"text\",\n        className: \"add-book__input\",\n        value: title,\n        onChange: function onChange(e) {\n          return changeTitle(e.target.value);\n        },\n        placeholder: \"Book title...\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }));\n    };\n\n    _this.renderPublicationDataInput = function () {\n      var _assertThisInitialize3 = _assertThisInitialized(_assertThisInitialized(_this)),\n          changePublicationDate = _assertThisInitialize3.changePublicationDate,\n          state = _assertThisInitialize3.state;\n\n      var publicationDate = state.publicationDate;\n      return React.createElement(\"div\", {\n        className: \"add-book__input__container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Publication date:\\xA0\", React.createElement(\"input\", {\n        ref: \"_publicationDate\",\n        type: \"number\",\n        className: \"add-book__input\",\n        value: publicationDate,\n        onChange: function onChange(e) {\n          return changePublicationDate(e.target.value);\n        },\n        min: \"1800\",\n        max: \"2019\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }));\n    };\n\n    _this.store = _store;\n    _this.props = props;\n    _this.state = {\n      title: props.editBook.title ? props.editBook.title : '',\n      publicationDate: props.editBook.publicationDate ? props.editBook.publicationDate : ''\n    };\n    return _this;\n  }\n\n  _createClass(AddBookForm, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      this.setState({\n        title: nextProps.editBook.title ? nextProps.editBook.title : '',\n        publicationDate: nextProps.editBook.publicationDate ? nextProps.editBook.publicationDate : ''\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var submit = this.submit;\n      return React.createElement(\"div\", {\n        className: \"add-book__host\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"add-book\",\n        onSubmit: submit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, this.renderTitleInput(), this.renderPublicationDataInput(), React.createElement(\"button\", {\n        className: \"app__button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Save\")));\n    }\n  }]);\n\n  return AddBookForm;\n}(Component);\n\nAddBookForm.contextTypes = {\n  store: PropTypes.object\n};\nexport default AddBookForm;","map":{"version":3,"sources":["/Users/olgakanishcheva/Developer/book-editor/client/src/components/AddBookForm.js"],"names":["React","Component","PropTypes","addBook","validTextInput","AddBookForm","props","store","submit","e","state","refs","clearState","preventDefault","textInputs","name","_title","maxLength","every","input","dispatch","title","publicationDate","focus","changeTitle","setState","prevState","changePublicationDate","date","renderTitleInput","target","value","renderPublicationDataInput","editBook","nextProps","contextTypes","object"],"mappings":"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","sourcesContent":["import './../stylesheets/AddBookForm.css'\nimport React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport { addBook } from './../actions/actions'\nimport validTextInput from './../helpers/validTextInput'\n\nclass AddBookForm extends Component {\n\n  constructor(props, {store}) {\n    super(props)\n    this.store = store\n    this.props = props\n    this.state = {\n      title: props.editBook.title ? props.editBook.title : '',\n      publicationDate: props.editBook.publicationDate ? props.editBook.publicationDate : ''\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      title: nextProps.editBook.title ? nextProps.editBook.title : '',\n      publicationDate: nextProps.editBook.publicationDate ? nextProps.editBook.publicationDate : ''\n    })\n  }\n\n  submit = (e) => {\n    const {state, store, refs, clearState} = this\n    e.preventDefault()\n\n    const textInputs = [{\n      name: refs._title,\n      maxLength: 30\n    }]\n\n    if (!textInputs.every((input) => validTextInput({input: input.name, maxLength: input.maxLength}))) return\n\n    store.dispatch(addBook({\n      title: state.title,\n      publicationDate: +(state.publicationDate)\n    }))\n    \n    refs._title.focus()\n  }\n\n  changeTitle = (title) => {\n    this.setState(prevState => ({\n      ...prevState,\n      title: title\n    }))\n  }\n\n  changePublicationDate = (date) => {\n    this.setState(prevState => ({\n      ...prevState,\n      publicationDate: date\n    }))\n  }\n\n  renderTitleInput = () => {\n    const {changeTitle, state} = this\n    const {title} = state\n\n    return (\n      <div className='add-book__input__container'>\n        <input ref='_title'\n               type='text'\n               className='add-book__input'\n               value={title}\n               onChange={(e) => changeTitle(e.target.value)}\n               placeholder='Book title...' required/>\n      </div>\n    )\n  }\n\n  renderPublicationDataInput = () => {\n    const {changePublicationDate, state} = this\n    const {publicationDate} = state\n\n    return (\n      <div className='add-book__input__container'>\n        Publication date:&nbsp;\n        <input ref='_publicationDate'\n               type='number'\n               className='add-book__input'\n               value={publicationDate}\n               onChange={(e) => changePublicationDate(e.target.value)}\n               min='1800'\n               max='2019' />\n      </div>\n    )\n  }\n\n  render() {\n    const {submit} = this\n    return (\n      <div className='add-book__host'>\n        <form className='add-book' onSubmit={submit}>\n          {this.renderTitleInput()}\n          {this.renderPublicationDataInput()}\n          <button className='app__button'>Save</button>\n        </form>\n      </div>\n    )\n  }\n}\n\nAddBookForm.contextTypes = {\n  store: PropTypes.object\n}\n\nexport default AddBookForm\n"]},"metadata":{},"sourceType":"module"}