{"ast":null,"code":"import _objectSpread from \"/Users/olgakanishcheva/Developer/book-editor/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/olgakanishcheva/Developer/book-editor/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/olgakanishcheva/Developer/book-editor/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/olgakanishcheva/Developer/book-editor/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/olgakanishcheva/Developer/book-editor/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/olgakanishcheva/Developer/book-editor/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/olgakanishcheva/Developer/book-editor/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/olgakanishcheva/Developer/book-editor/client/src/components/AddBookForm.js\";\nimport './../stylesheets/AddBookForm.css';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { addBook } from './../actions/actions';\nimport validTextInput from './../helpers/validTextInput'; // const AddBookForm = (props, { store }) => {\n//   let _title,\n//       _publicationDate\n//   const submit = e => {\n//     e.preventDefault()\n//     const textInputs = [{\n//       name: _title,\n//       maxLength: 30\n//     }]\n//     if (!textInputs.every((input) => validTextInput({input: input.name, maxLength: input.maxLength}))) return\n//     store.dispatch(addBook({\n//       title: _title.value,\n//       publicationDate: +(_publicationDate.value)\n//     }))\n//     textInputs.forEach((input) => input.name.value = '')\n//     _publicationDate.value = ''\n//     _title.focus()\n//   }\n//   return (\n//     <div className='add-book__host'>\n//       <form className='add-book' onSubmit={submit}>\n//         <div className='add-book__input__container'>\n//           <input ref={input => _title = input}\n//                  type='text'\n//                  className='add-book__input'\n//                  onChange={(e) => changeTitle()}\n//                  placeholder='Book title...' required/>\n//         </div>\n//         <div className='add-book__input__container'>\n//           Publication date:&nbsp;\n//           <input ref={input => _publicationDate = input}\n//                  type='number'\n//                  className='add-book__input'\n//                  min='1800'\n//                  max='2019' />\n//         </div>\n//         <button className='app__button'>Save</button>\n//       </form>\n//     </div>\n//   )\n// }\n\nvar AddBookForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddBookForm, _Component);\n\n  function AddBookForm(props, _ref) {\n    var _this;\n\n    var _store = _ref.store;\n\n    _classCallCheck(this, AddBookForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddBookForm).call(this, props));\n\n    _this.submit = function (e) {\n      var _assertThisInitialize = _assertThisInitialized(_assertThisInitialized(_this)),\n          state = _assertThisInitialize.state,\n          store = _assertThisInitialize.store,\n          refs = _assertThisInitialize.refs,\n          clearState = _assertThisInitialize.clearState;\n\n      e.preventDefault();\n      var textInputs = [{\n        name: refs._title,\n        maxLength: 30\n      }];\n      if (!textInputs.every(function (input) {\n        return validTextInput({\n          input: input.name,\n          maxLength: input.maxLength\n        });\n      })) return;\n      store.dispatch(addBook({\n        title: state.title,\n        publicationDate: +state.publicationDate\n      }));\n\n      refs._title.focus();\n\n      clearState();\n    };\n\n    _this.changeTitle = function (title) {\n      _this.setState(function (prevState) {\n        return _objectSpread({}, prevState, {\n          title: title\n        });\n      });\n    };\n\n    _this.changePublicationDate = function (date) {\n      _this.setState(function (prevState) {\n        return _objectSpread({}, prevState, {\n          publicationDate: date\n        });\n      });\n    };\n\n    _this.clearState = function () {\n      _this.setState({\n        title: '',\n        publicationDate: ''\n      });\n    };\n\n    _this.renderTitleInput = function () {\n      var _assertThisInitialize2 = _assertThisInitialized(_assertThisInitialized(_this)),\n          changeTitle = _assertThisInitialize2.changeTitle,\n          state = _assertThisInitialize2.state;\n\n      var title = state.title;\n\n      var _title;\n\n      return React.createElement(\"div\", {\n        className: \"add-book__input__container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        ref: \"_title\",\n        type: \"text\",\n        className: \"add-book__input\",\n        value: title,\n        onChange: function onChange(e) {\n          return changeTitle(e.target.value);\n        },\n        placeholder: \"Book title...\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }));\n    };\n\n    _this.store = _store;\n    _this.state = {\n      title: props.editBook.title ? props.editBook.title : '',\n      publicationDate: props.editBook.publicationDate ? props.editBook.publicationDate : ''\n    };\n    return _this;\n  }\n\n  _createClass(AddBookForm, [{\n    key: \"render\",\n    value: function render() {\n      var submit = this.submit,\n          changePublicationDate = this.changePublicationDate;\n      var publicationDate = this.state.publicationDate;\n\n      var _publicationDate;\n\n      return React.createElement(\"div\", {\n        className: \"add-book__host\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"add-book\",\n        onSubmit: submit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, this.renderTitleInput(), React.createElement(\"div\", {\n        className: \"add-book__input__container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Publication date:\\xA0\", React.createElement(\"input\", {\n        ref: \"_publicationDate\",\n        type: \"number\",\n        className: \"add-book__input\",\n        value: publicationDate,\n        onChange: function onChange(e) {\n          return changePublicationDate(e.target.value);\n        },\n        min: \"1800\",\n        max: \"2019\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        className: \"app__button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"Save\")));\n    }\n  }]);\n\n  return AddBookForm;\n}(Component);\n\nAddBookForm.contextTypes = {\n  store: PropTypes.object\n};\nexport default AddBookForm;","map":{"version":3,"sources":["/Users/olgakanishcheva/Developer/book-editor/client/src/components/AddBookForm.js"],"names":["React","Component","PropTypes","addBook","validTextInput","AddBookForm","props","store","submit","e","state","refs","clearState","preventDefault","textInputs","name","_title","maxLength","every","input","dispatch","title","publicationDate","focus","changeTitle","setState","prevState","changePublicationDate","date","renderTitleInput","target","value","editBook","_publicationDate","contextTypes","object"],"mappings":"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","sourcesContent":["import './../stylesheets/AddBookForm.css'\nimport React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport { addBook } from './../actions/actions'\nimport validTextInput from './../helpers/validTextInput'\n\n// const AddBookForm = (props, { store }) => {\n//   let _title,\n//       _publicationDate\n\n//   const submit = e => {\n//     e.preventDefault()\n\n//     const textInputs = [{\n//       name: _title,\n//       maxLength: 30\n//     }]\n\n//     if (!textInputs.every((input) => validTextInput({input: input.name, maxLength: input.maxLength}))) return\n\n//     store.dispatch(addBook({\n//       title: _title.value,\n//       publicationDate: +(_publicationDate.value)\n//     }))\n    \n//     textInputs.forEach((input) => input.name.value = '')\n//     _publicationDate.value = ''\n//     _title.focus()\n//   }\n\n//   return (\n//     <div className='add-book__host'>\n//       <form className='add-book' onSubmit={submit}>\n//         <div className='add-book__input__container'>\n//           <input ref={input => _title = input}\n//                  type='text'\n//                  className='add-book__input'\n//                  onChange={(e) => changeTitle()}\n//                  placeholder='Book title...' required/>\n//         </div>\n//         <div className='add-book__input__container'>\n//           Publication date:&nbsp;\n//           <input ref={input => _publicationDate = input}\n//                  type='number'\n//                  className='add-book__input'\n//                  min='1800'\n//                  max='2019' />\n//         </div>\n//         <button className='app__button'>Save</button>\n//       </form>\n//     </div>\n//   )\n\n// }\n\nclass AddBookForm extends Component {\n\n  constructor(props, {store}) {\n    super(props)\n    this.store = store\n    this.state = {\n      title: props.editBook.title ? props.editBook.title : '',\n      publicationDate: props.editBook.publicationDate ? props.editBook.publicationDate : ''\n    }\n  }\n\n  submit = (e) => {\n    const {state, store, refs, clearState} = this\n    e.preventDefault()\n\n    const textInputs = [{\n      name: refs._title,\n      maxLength: 30\n    }]\n\n    if (!textInputs.every((input) => validTextInput({input: input.name, maxLength: input.maxLength}))) return\n\n    store.dispatch(addBook({\n      title: state.title,\n      publicationDate: +(state.publicationDate)\n    }))\n    \n    refs._title.focus()\n    clearState()\n  }\n\n  changeTitle = (title) => {\n    this.setState(prevState => ({\n      ...prevState,\n      title: title\n    }))\n  }\n\n  changePublicationDate = (date) => {\n    this.setState(prevState => ({\n      ...prevState,\n      publicationDate: date\n    }))\n  }\n\n  clearState = () => {\n    this.setState({\n      title: '',\n      publicationDate: ''\n    })\n  }\n\n  renderTitleInput = () => {\n    const {changeTitle, state} = this\n    const {title} = state\n    let _title\n    return (\n      <div className='add-book__input__container'>\n        <input ref='_title'\n               type='text'\n               className='add-book__input'\n               value={title}\n               onChange={(e) => changeTitle(e.target.value)}\n               placeholder='Book title...' required/>\n      </div>\n    )\n  }\n\n  render() {\n    const {submit, changePublicationDate} = this\n    const {publicationDate} = this.state\n    let _publicationDate\n    return (\n      <div className='add-book__host'>\n        <form className='add-book' onSubmit={submit}>\n          {this.renderTitleInput()}\n          <div className='add-book__input__container'>\n            Publication date:&nbsp;\n            <input ref='_publicationDate'\n                   type='number'\n                   className='add-book__input'\n                   value={publicationDate}\n                   onChange={(e) => changePublicationDate(e.target.value)}\n                   min='1800'\n                   max='2019' />\n          </div>\n          <button className='app__button'>Save</button>\n        </form>\n      </div>\n    )\n  }\n}\n\nAddBookForm.contextTypes = {\n  store: PropTypes.object\n}\n\nexport default AddBookForm\n"]},"metadata":{},"sourceType":"module"}